# FAQ

- **Вопрос:** Какие микросервисы уже есть в системе?  
  **Ответ:** Интернет-магазин (ИМ), оффлайн-точки продаж (POS), платёжный сервис (Payments), учётная система заказов (Orders), CRM-система (Clients).

- **Вопрос:** Какие потоки данных через Kafka уже настроены?  
  **Ответ:** Потоки `All_SalesOrder`, `All_Payments`, `All_Clients`.

- **Вопрос:** Какова цель проекта и ключевые KPI?  
  **Ответ:** Продажа подарочных сертификатов и рост количества покупок с их использованием.

- **Вопрос:** Какие предметные области и сценарии необходимо покрыть?  
  **Ответ:** Обязателен сценарий возврата подарочного сертификата; остальные сценарии уточняются.

- **Вопрос:** Требуются ли внешние интеграции?  
  **Ответ:** Планируются только интеграции с внутренними системами.

- **Вопрос:** Есть ли нефункциональные требования?  
  **Ответ:** Сейчас за рамками проекта.

- **Вопрос:** Какие команды и роли задействованы?  
  **Ответ:** Все необходимые компетенции доступны внутри компании.

- **Вопрос:** Есть ли сроки и приоритеты?  
  **Ответ:** Последовательность и сроки реализации определяет архитектор (на твоё усмотрение).

- **Вопрос:** Какие требования по данным и аналитике?  
  **Ответ:** Нужно передавать все данные в BI, по возможности переиспользовать существующие потоки.

- **Вопрос:** Какие обязательные атрибуты у подарочного сертификата?  
  **Ответ:** Номер и номинал (устанавливается при покупке).

- **Вопрос:** Есть ли технологические ограничения?  
  **Ответ:** Следовать корпоративным правилам; остальное на усмотрение архитектора.

- **Вопрос:** Как назовём сервис обработки подарочных сертификатов?  
  **Ответ:** «Сервис Процессинга Подарочных Сертификатов».

- **Вопрос:** Нужны ли отдельные UI-приложения для покупателей и внутренних пользователей?  
  **Ответ:** Достаточно интеграции в существующие каналы.

- **Вопрос:** Требуется ли хранить историю операций по сертификатам?  
  **Ответ:** Требования минимальные (базовый аудит).

- **Вопрос:** Есть ли ограничения по использованию сертификатов?  
  **Ответ:** Сертификаты не должны пересекаться между каналами продаж (онлайн и оффлайн).

- **Вопрос:** Поддерживается ли частичное списание номинала и комбинирование с другими оплатами?  
  **Ответ:** Да, это нормальный сценарий.

- **Вопрос:** Нужны ли нотификации при операциях с сертификатами?  
  **Ответ:** При выдаче сервис должен попросить CRM отправить покупателю CVC-код сертификата.

- **Вопрос:** Нужно ли уточнять BI-потребности?  
  **Ответ:** Дополнительные требования по BI сейчас за рамками проекта.

- **Вопрос:** Какие требования по возврату средств при возврате сертификата?  
  **Ответ:** Предпочтительно возвращать деньги на исходное платёжное средство; если невозможно — запрашивать реквизиты платежа.

- **Вопрос:** Как оформляются заказы и платежи при операциях с сертификатами?  
  **Ответ:** Каналы (ИМ и POS) публикуют заказы в `All_SalesOrder` и платежи в `All_Payments`; прямые HTTP-вызовы к Payments не используются.

- **Вопрос:** Как выдаются новые подарочные сертификаты?  
  **Ответ:** Сервис процессинга предоставляет HTTP-метод «get next cert», который возвращает следующий доступный сертификат.

- **Вопрос:** Где CRM получает данные для отправки CVC?  
  **Ответ:** CRM получает из `GiftCertificates.Stream` состояние `GiftCertificate` с признаком `NOTIFICATION_REQUESTED` и обращается к сервису процессинга по API, чтобы получить CVC.

- **Вопрос:** Какие потоки Kafka остаются для сервиса процессинга?  
  **Ответ:** Все состояния объекта `GiftCertificate` передаются через единый поток `GiftCertificates.Stream`, что соответствует корпоративным правилам.
