# Clarification FAQ

**Q:** Какое описание проекта?
**A (стоит уточнить у директора по цифровой трансформации):** использование подарочных сертификатов в екоммерс энтерпрайз организации.

**Q:** Какие сервисы уже задействованы?
**A (спросить у архитектора платформы):** интернет-магазин, офлайн-точки продаж (POS), платёжный сервис (Payments), учётная система (Orders), CRM-система (Clients).

**Q:** Какие Kafka-топики доступны?
**A (у владельца интеграционной шины):** All_SalesOrder, All_Payments, All_Clients.

**Q:** Чего пока нет в системе?
**A (у директора по продукту):** нет сервиса процессинга подарочных сертификатов, потоков по сертификатам, UI для покупателей и внутренних задач.

**Q:** Какие виды сертификатов планируются?
**A (у маркетолога):** электронные и физические, балансные, не персональные.

**Q:** Каков жизненный цикл сертификата?
**A (у бизнес-аналитика логистики):** выпуск, активация, частичные/полные списания, возвраты/аннулирования.

**Q:** Где хранится состояние сертификатов?
**A (у архитектора данных):** в мастер-сервисе процессинга.

**Q:** Есть ли ограничения по срокам действия и валютам?
**A (у финансового директора):** нет.

**Q:** Какие сценарии использования поддерживаются?
**A (у продукт-менеджера e-commerce):** проверка баланса, частичная или полная оплата.

**Q:** Какие роли внутренних пользователей задействованы?
**A (у руководителя розничной сети):** продавец оффлайн точки, оператор поддержки.

**Q:** Есть ли внешние интеграции или нормативные ограничения?
**A (у директора по комплаенсу):** пока за рамками.

**Q:** Каков подход к аудиту и аналитике?
**A (у руководителя службы аудита):** аудит обязателен, дашборды вне проекта.

**Q:** Как производится загрузка сертификатов?
**A (у операционного менеджера):** массовые загрузки прегенерированных номеров.

**Q:** Когда активируется физический сертификат?
**A (у директора по розничным операциям):** при полной оплате покупки сертификата.

**Q:** Как обрабатываются частичные списания?
**A (у финансового контролёра):** остаток остаётся на сертификате и доступен для дальнейшего использования.

**Q:** Требуются ли лимиты или антифрод?
**A (у службы безопасности):** нет.

**Q:** Поддерживается ли офлайн-режим?
**A (у директора по IT-инфраструктуре):** в эту версию не входит.

**Q:** Как клиент получает CVC?
**A (у менеджера по коммуникациям):** через SMS при покупке, SLA не критичен.

**Q:** Нужно ли расширять существующие сервисы?
**A (у архитектора платформы):** требуется предложить варианты интеграции.

**Q:** Нужны ли песочницы или миграции?
**A (у менеджера внедрения):** вне рамок проекта.

**Q:** Есть предпочтения по формату кодов?
**A (у маркетолога):** нет.

**Q:** Какова целевая нагрузка?
**A (у capacity-менеджера):** около 100 операций с сертификатами в день.

**Q:** Какие атрибуты нужны для сертификатов и транзакций?
**A (у архитектора данных):** требуется предложить структуру атрибутов.

**Q:** Как вести историю состояний?
**A (у руководителя аналитики):** желательно хранить, горизонт хранения не задан.

**Q:** Какие требования к логированию?
**A (у руководителя службы аудита):** требуется предложить состав журнала.

**Q:** Нужны ли ограничения доступа в UI?
**A (у руководителя поддержки):** не требуется.

**Q:** Нужна ли маскировка данных?
**A (у CISO):** не требуется.

**Q:** Как организовать поток данных в BI?
**A (у руководителя BI):** необходим отдельный Kafka-поток из сервиса процессинга.

**Q:** Как предотвратить двойную продажу сертификата?
**A (у коммерческого директора):** нужно исключить повторную реализацию одного кода как физической карты и как электронного сертификата.

**Q:** Как распределяются суммы платежей по сертификатам в заказе?
**A (финансовый директор / бухгалтерия):** покупатель при оформлении заказа явно указывает сумму для каждого сертификата; значения фиксируются и используются для распределения поступивших платежей.

**Q:** Должны ли события `All_Payments` содержать разбивку суммы по сертификатам?
**A (руководитель сервиса Payments):** решение оставлено на усмотрение проектной команды; допускается расширение существующих событий либо публикация новой структуры, если это упростит процессинг.

**Q:** Когда активируется сертификат при оплате несколькими платежами?
**A (продуктовый менеджер e-commerce):** сертификат активируется только после полной оплаты всего заказа.

**Q:** Как описаны позиции заказа с сертификатами?
**A (архитектор Orders / аналитик каталогов):** для каждого сертификата создаётся отдельная позиция заказа с атрибутами `certificateSku`, `plannedDenomination`, `intendedRecipient`; при необходимости модель можно расширить в рамках проекта.

**Q:** Каким способом возвращаются денежные средства при возврате сертификата?
**A (финансовый директор / бухгалтерия):** предпочтительно вернуть средства тем же платёжным способом; если невозможно, инициировать запрос реквизитов покупателя для альтернативного возврата.

**Q:** Каким образом сервис Payments отражает возврат по сертификату?
**A (руководитель сервиса Payments):** возврат публикуется как объект класса Payment в отдельном статусе, содержащем данные по `orderLineId`.

**Q:** Кто инициирует возврат сертификата и нужен ли UI для частичного возврата?
**A (оператор поддержки / фронты):** в POS возврат инициирует кассир; в онлайн-канале — сам покупатель через веб-интерфейс. Частичный возврат остатка по сертификату поддерживается автоматически (возвращается весь доступный остаток).

**Q:** Нужно ли корректировать исходный заказ при возврате сертификата?
**A (архитектор процесса заказов):** допустимо решение на усмотрение проектной команды; рекомендуется оформить отдельный возвратный документ с привязкой к `orderLineId`.

**Последнее обновление:** 2025-11-08 (обновлено)
